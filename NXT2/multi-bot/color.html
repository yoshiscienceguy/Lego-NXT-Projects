<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Multi-Bot Programs</title>
<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
</head>

<body style="font-family: Verdana; font-size: 10pt">

<table border="0" width="740">
	<tr>
		<td><a href="../../index.html">
<img border="0" src="../../images/BytesandBotsBanner.png" width="296" height="106" alt="nxtprograms.com"></td>
		<td>
		<p align="right"><font size="2" face="Verdana">Fun 
		Projects for 
				your </font><font size="2"><font face="Arial Rounded MT Bold">LEGO</font><sup><font face="Arial Rounded MT Bold">�</font></sup><font face="Arial Rounded MT Bold"> 
				MINDSTORMS</font><sup><font face="Arial Rounded MT Bold">�</font></sup></font><font size="2" face="Arial Rounded MT Bold"> 
				NXT!</font></td>
	</tr>
</table>
<table border="0" width="742" height="26" cellpadding="4">
	<tr>
		<td bgcolor="#FF9900">
		<p align="left" style="margin-bottom: 0"><font size="2">
		<a href="../../index.html"><font color="#000000">Home</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../../projects.html"><font color="#000000">Projects</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../../help.html"><font color="#000000">Help</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../../contact.html"><font color="#000000">Contacts</font></a></font></td>
	</tr>
</table>
<table border="0" width="742" cellpadding="6">
	<tr>
		<td><font face="Arial Rounded MT Bold" size="6">Multi-Bot Programs</font></td>
		<td width="174" align="right">
		<table border="0">
			<tr>
				<td height="23" align="right">
				<font size="2"><a href="programs.html">Programs Index</a></font></td>
			</tr>
			<tr>
				<td height="23" align="right">
				<font size="2"><a href="Multi-Bot-Programs">Programs Folder</a></font></td>
			</tr>
		</table>
		</td>
	</tr>
</table>
<p><a href="../../index.html"><img border="0" src="../../images/ForNXT2.png" width="737" height="21"></a></p>
<table border="0" width="740">
	<tr>
		<td>
		<h2><font size="4">(G) Using the Color Sensor</font></h2>
		<p><font size="2">The programs in this section show different ways to 
		use Multi-Bot's <a href="line/steps.html">Line Sensor</a> and
		<a href="ball_trap/steps.html">Ball Trap Sensor</a> 
		attachments, which both use the NXT 2.0 Color Sensor.&nbsp; </font></p>
		<div align="center">
			<table border="1" width="650" cellpadding="4">
				<tr>
					<td width="328"><font size="2"><b>Note:</b> The Color Sensor 
					programs require the <i>NXT 2.0 Color Sensor</i> and the software 
					that comes with the NXT 2.0 Retail kit (8547) or the LEGO 
					Education NXT-G 2.1 software.&nbsp; These programs cannot be 
					used as-is with the standard <i>Light Sensor</i>, other color 
					sensors, or with other versions of the NXT software. </font>
					<p><font size="2">For programs using the <i>Light Sensor</i>, <br>
					see <a href="light.html">Using the Light Sensor</a>.</font></td>
					<td align="center">
					<img border="0" src="../../images/ColorSensor.png" width="112" height="97"><br>
					<font size="1"><br>
					NXT 2.0 Color Sensor</font></td>
					<td align="center" width="142">
					<img border="0" src="../../images/LightSensor.jpg" width="126" height="99"><br>
					<font size="1"><br>
					Light Sensor</font></td>
				</tr>
			</table>
			<p>&nbsp;</div>
		<h3><font size="3"><a name="Color"></a>Color Sensing</font></h3>
		<p><font size="2">The Color Sensor with <i>Action</i> set to <i>Color 
		Sensor</i> can distinguish six different colors (black, blue, green, 
		yellow, red, and white).</font></p>
		<table border="1" width="100%" bordercolorlight="#808080" bordercolordark="#808080" style="border-collapse: collapse" cellpadding="3">
			<tr>
				<td align="left" valign="top" width="199"><b><font size="2">
				Program</font></b></td>
				<td align="left" valign="top" width="389"><b><font size="2">
				Description and Observations</font></b></td>
				<td align="right" valign="top"><b><font size="2">Attachments</font></b></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G1-FindColor</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramEasy.gif" width="53" height="16" alt="Easy"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program shows the simplest way to use the Color Sensor, which is 
				to the <b>Wait for Color Sensor</b> block.&nbsp; A <b>Move</b>
				<i>Unlimited</i> block starts the robot driving forward, then 
				the program continues to the <b>Wait for Color Sensor</b> block, 
				which will wait until the sensor sees Black, then a <b>Move</b>
				<i>Stop</i> block stops the robot.</font><p><font size="2">Try 
				making a black line on a light-colored floor with black 
				electrical tape, then start the robot facing perpendicular to 
				the line at any distance away.&nbsp; It should stop right at the 
				line.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G2-SumoColor</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramEasy.gif" width="53" height="16" alt="Easy"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program extends the <b>G1-FindColor</b> 
				program to make the robot back up and turn when it sees a black 
				line, and then the whole sequence is repeated in a <b>Loop</b>.&nbsp; </font>
				<p><font size="2">Now if you make a large black square (or any 
				shape) with electrical tape on a light-colored floor and start 
				Multi-Bot inside the box, it will try to drive around inside the 
				box &quot;bouncing off&quot; the borders and staying inside.&nbsp; </font>
				<p><font size="2">Staying inside an area marked with a colored 
				border is the first step in playing a &quot;Robot Sumo&quot; game, where 
				two robots try to push each other outside of the &quot;ring&quot;.&nbsp; 
				You can play a simple practice Robot Sumo game with one 
				Multi-Bot robot by placing various objects inside the ring with 
				the robot, and see if Multi-Bot with an attachment such as the
				<a href="pusher/steps.html">Sumo Pusher</a> can push them all 
				outside of the ring while staying inside itself.&nbsp; Try 
				changing the time of the back up and the angle of the turn in 
				the <b>LeftPivotAngle</b> block to get different driving 
				patterns and see which work best.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></p>
				<p><font size="2"><a href="pusher/steps.html">Sumo Pusher</a><br>
				(Optional)</font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G3-ColorDrive</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramIntermediate.gif" width="53" height="16" alt="Intermediate"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program can make Multi-Bot drive along a road or course marked 
				by different colored borders which cause different actions, as 
				follows:</font><ul>
					<li><font size="2">When the Color Sensor sees blue, 
					Multi-Bot will turn left until it is off of the blue color.&nbsp;
					</font></li>
					<li><font size="2">When the sensor sees green, Multi-Bot 
					will turn right until it is off of the green color.</font></li>
					<li><font size="2">When the sensor sees Red, Multi-Bot will 
					stop.</font></li>
					<li><font size="2">All other colors will make Multi-Bot 
					drive forward.</font></li>
				</ul>
				<p><font size="2">If you start on a neutral-colored floor (test 
				to make sure the <b>G3-ColorDrive</b> program drives 
				straight on it first), then you can use colored electrical tape, 
				painters tape, or tape down strips of colored construction paper 
				to mark the borders of the course.&nbsp; Put blue on the right 
				border, green on the left border, and red at the end, and 
				Multi-Bot will try to drive the course on its own.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G4-ColorFollow</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramIntermediate.gif" width="53" height="16" alt="Intermediate"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program is a very simple &quot;line follower&quot; using the Color Sensor.&nbsp; 
				If you put a black line with electrical tape on a light-colored 
				floor, then Multi-Bot will slowly follow the line, even if the 
				line has curves in it.
				</font>
				<p><font size="2">Note that in this kind of line following, the 
				robot is actually following the <i>right</i> <i>edge</i> of the 
				line, not down the middle of the line as you might expect.&nbsp; 
				The robot tries to keep the black line just to the left of the 
				sensor and the open floor to the right of the sensor, by 
				zigzagging back and forth on either side of the edge, 
				alternately seeing the line and the floor.</font></p>
				<p><font size="2">This line follower is very simple but slow.&nbsp; 
				Faster line following technique are shown in the
				<a href="#Follow">Using the Light Sensor Mode</a> section below.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G5-ColorSpeak</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramAdvanced.gif" width="53" height="16" alt="Advanced"></b></td>
					</tr>
					</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This program 
				will make the NXT speak the names of colors that the Color 
				Sensor sees (e.g. &quot;Blue&quot;) and also display the color names on 
				the screen.</font><p><font size="2">You can use the Color Sensor 
				in any configuration where it can get close to different 
				objects.&nbsp; Hold it over objects of different colors to see 
				and hear the results.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="line/steps.html">Line Sensor</a></font><br>
				<font size="2">(or loose Color Sensor)</font>&nbsp;</td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G6-BallTrap1</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramIntermediate.gif" width="53" height="16" alt="Intermediate"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program will make Multi-Bot with the
				<a href="ball_trap/steps.html">Ball Trap Sensor</a> drive 
				forward until a ball enters the trap, then Multi-Bot will stop 
				and speak the name of the ball color that it found.</font><p>
				<font size="2">Sensing small round objects is actually 
				challenging for the Color Sensor, so you may find cases where 
				the sensor reports the wrong color.&nbsp; In particular, red and 
				green balls may be mistaken for yellow.&nbsp; Give it a try and 
				see how well it works for you.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2"><a href="ball_trap/steps.html">Ball Trap 
				Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G7-BallTrap2</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramAdvanced.gif" width="53" height="16" alt="Advanced"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program makes an improvement to the <b>G6-BallTrap1</b> program by ignoring yellow balls, because 
				yellow is often confused with other colors.&nbsp; Now if you try 
				the challenge with only blue, green, and red balls, it should be 
				more reliable. </font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2"><a href="ball_trap/steps.html">Ball Trap 
				Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G8-BallGolf</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramEasy.gif" width="53" height="16" alt="Easy"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program is designed to get Multi-Bot to drive up to a blue or 
				green ball, trap it with the <a href="ball_trap/steps.html">
				Ball Trap Sensor</a>, then hit it with the
				<a href="golf/steps.html">Golfing Arm</a>.</font><p>
				<font size="2">Start the program with the golfing arm in the 
				straight down position, and a green or red ball in front of 
				Multi-Bot so that it will enter the trap.&nbsp; Short carpet on 
				the floor works best.</font></p>
				<p><font size="2">In order to re-position the robot for hitting 
				a ball after trapping it, the program uses a combination of <b>
				Move</b> and <b>Motor</b> blocks with the <i>Duration</i> set to 
				certain <i>Degree</i> measurements.&nbsp; This kind of movement 
				is called &quot;Dead Reckoning&quot; and is sensitive to the kind of 
				surface used (carpet, smooth floor, etc).&nbsp; If Multi-Bot is 
				missing the golf balls, try adjusting the <i>Degree</i> values 
				used.&nbsp; </font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2"><a href="ball_trap/steps.html">Ball Trap 
				Sensor</a></font></p>
				<p><font size="2"><a href="golf/steps.html">Golfing Arm</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="199">
				<table border="0">
					<tr>
						<td><b><font size="2">G9-BallHunt</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramAdvanced.gif" width="53" height="16" alt="Advanced"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="389"><font size="2">This 
				program extends the <b>G8-BallGolf</b> 
				program to make Multi-Bot try to find its own golf balls (green) 
				among a set of blue and green balls placed around it, and hit 
				the green ones but leave the blue ones alone.</font><p>
				<font size="2">Start the program with the golfing arm in the 
				straight down position, and a a few green and blue balls close 
				by at different angles.&nbsp; Short carpet on the floor works 
				best.</font></p>
				<p><font size="2">Multi-Bot will drive out straight to try to 
				find a ball (but will give up if it doesn't find a ball in a 
				certain distance).&nbsp; If it finds a blue ball, it will leave 
				it alone and back up to the starting position, turn a bit, then 
				head out again looking for another ball.&nbsp; When it finds a 
				green ball, Multi-Bot will try to hit it then return to the 
				starting position to look for more balls.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2"><a href="ball_trap/steps.html">Ball Trap 
				Sensor</a></font></p>
				<p><font size="2"><a href="golf/steps.html">Golfing Arm</a></font></td>
			</tr>
		</table>
		<h3>&nbsp;</h3>
		<h3><font size="3"><a name="Follow"></a>Line Following in Light Sensor 
		Mode</font></h3>
		<p><font size="2">The Color Sensor with <i>Action</i> set to <i>Light 
		Sensor</i> will detect the overall brightness of light detected and 
		output a number from 0-100 which indicates the brightness (0 = darkest, 
		100 = brightest).</font></p>
		<table border="1" width="100%" bordercolorlight="#808080" bordercolordark="#808080" style="border-collapse: collapse" cellpadding="3">
			<tr>
				<td align="left" valign="top" width="208"><b><font size="2">
				Program</font></b></td>
				<td align="left" valign="top" width="397"><b><font size="2">
				Description and Observations</font></b></td>
				<td align="right" valign="top"><b><font size="2">Attachments</font></b></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="208">
				<table border="0">
					<tr>
						<td><b><font size="2">G10-LineFollow</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramIntermediate.gif" width="53" height="16" alt="Intermediate"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="397"><font size="2">This 
				program shows a simple way to make a line following program 
				using the Color Sensor in <i>Light Sensor</i> mode.&nbsp; If you 
				put a black line with electrical tape on a light-colored floor, 
				then Multi-Bot will follow the line, even if the line has curves 
				in it.&nbsp; The robot will follow the <i>right edge</i> of the 
				line, as explained for the <b>G4-ColorFollow</b> program above.</font><p><font size="2">The
				<b>G10-LineFollow</b> program is very 
				similar to the simple line following program
				<b>G4-ColorFollow</b>, which used the 
				Color Sensor in color-sensing mode, except that now the <b>Color 
				Sensor Switch</b> is configured to test for total brightness in
				<i>Light Sensor</i> mode, and therefore must test for a specific
				<i>brightness threshold</i> value in the <i>Compare</i> field.&nbsp;
				</font></p>
				<p><font size="2">The brightness threshold value specified in
				<b>G10-LineFollow</b> is set at <i>36</i>, 
				but you may need to adjust this value depending on the lighting 
				conditions for your test and other factors.&nbsp; Although using 
				the Color Sensor in <i>Light Sensor</i> mode will ultimately be 
				more powerful for line following and similar tasks (see later 
				programs below), the need to determine an appropriate brightness 
				threshold adds an additional complication.&nbsp; See the
				<b>G11-DispLight</b> program below for 
				a method of determining a good threshold value.</font></p>
				<p><font size="2">Another difference between the
				<b>G10-LineFollow</b> program and the
				<b>G4-ColorFollow</b> program is that 
				instead of stopping the inside motor while turning back towards 
				the line, <b>G10-LineFollow</b> runs 
				the inside motor at a low power.&nbsp; This makes the driving 
				smoother and faster.&nbsp; You can also easily adjust the speed 
				and smoothness by adjusting the power levels used.</font></p>
				</td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="208">
				<table border="0">
					<tr>
						<td><b><font size="2">G11-DispLight</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
<b>
<img border="0" src="../../images/ProgramAdvanced.gif" width="53" height="16" alt="Advanced"></b></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="397"><font size="2">When 
				using the Color Sensor in <i>Light Sensor</i> mode, it is often 
				necessary to measure brightness values from the sensor 
				beforehand in order to estimate good values to test for (see the
				<b>G10-LineFollow</b> program above).&nbsp;
				</font>
				<p><font size="2">Since the <i>View</i> feature on the NXT brick 
				menu, where you would normally measure sensor values, does not 
				support the Color Sensor in <i>Light Sensor</i> mode, the
				<b>G11-DispLight</b> program is 
				included here to display measured values from the Color Sensor 
				in <i>Light Sensor</i> mode.&nbsp; </font></p>
				<p><font size="2">To determine a good brightness threshold value 
				for line following (e.g. for <b>G10-LineFollow</b>), do the following:</font></p>
				<ol>
					<li>
					<p style="margin-bottom: 6px"><font size="2">Run the
					<b>G11-DispLight</b> program on 
					the final robot configured as it will be for the line 
					following.</font></li>
					<li>
					<p style="margin-bottom: 6px"><font size="2">Position the 
					robot with the Color Sensor directly over the black line.&nbsp; 
					Rest the robot directly on the ground as if it were driving.&nbsp; 
					The distance from the sensor to the ground is very important 
					to the measurement, so do not hold the robot off of the 
					ground in your hands.</font></li>
					<li>
					<p style="margin-bottom: 6px"><font size="2">Move the robot 
					back and forth slightly until the displayed brightness value 
					is as low as possible.&nbsp; This is the <i>minimum</i> 
					brightness value that the sensor will expect to see while 
					line following.&nbsp; Make a note of this number.</font></li>
					<li>
					<p style="margin-bottom: 6px"><font size="2">Position the 
					robot on the floor far away from the black line and note the 
					new number measured.&nbsp; This is the <i>maximum</i> 
					brightness value that the sensor will expect to see while 
					line following.</font></li>
					<li>
					<p style="margin-bottom: 6px"><font size="2">Take the 
					average of the <i>minimum</i> and <i>maximum</i> values you 
					measured and use this for your brightness threshold value:<br>
					<i>&nbsp;&nbsp;&nbsp;&nbsp; threshold</i> = (<i>minimum</i> 
					+ <i>maximum</i>) / 2</font></li>
				</ol>
				<p style="margin-bottom: 6px"><font size="2">The
				<b>G11-DispLight</b> program also 
				introduces the <b>DisplayNum</b> My Block, which provides a 
				convenient way to display a number on the NXT screen with a 
				label in front, which is useful in a variety of different 
				situations. </font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="208">
				<table border="0">
					<tr>
						<td><b><font size="2">G12-LineFollow2</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
				<img border="0" src="../../images/ProgramExpert.gif" width="53" height="16" alt="Expert"></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="397"><font size="2">This 
				program uses the same simple motor control for line following as 
				the <b>G10-LineFollow</b> program, 
				except that it shows a way to <i>calibrate</i> the Color sensor 
				readings, which provides a way to make programs that don't 
				depend on &quot;hard-coded&quot; threshold numbers such as the number 36 
				in the <b>G10-LineFollow</b> program.&nbsp; 
				Instead of needing to measure the threshold ahead of time and 
				modify the program, you can now measure the light readings right 
				before the run, and the <b>G12-LineFollow2</b> will use them without needing to modify (and 
				recompile and re-download) the program.</font><p><font size="2">
				Although the NXT programming software contains a &quot;Calibrate 
				Sensors&quot; tool in the Tools menu, this tool does not support the 
				Color Sensor (only the older &quot;Light Sensor&quot;).&nbsp; So
				<b>G12-LineFollow2</b> introduces a 
				set of My Blocks that you can use to conveniently calibrate the 
				Color Sensor in <i>Light Sensor</i> mode and use the calibrated 
				readings in your programs.&nbsp; </font>
				<p><font size="2">The <b>CheckLightCal</b> My Block will ask you 
				on the NXT screen whether you would like to do a new 
				calibration.&nbsp; If the robot and lighting conditions have not 
				changed since the last time you calibrated it, you can skip the 
				re-calibration and the program will re-use the measured values 
				from the last calibration, which are stored in a <i>Data File</i>.&nbsp; 
				Note that the first time you run it, it will force you to 
				calibrate and not ask, since there is no existing calibration 
				data.</font><p><font size="2">The <b>CheckLightCal</b> My Block 
				internally uses another My Block named <b>CalibrateLight</b> 
				which will lead the user through the calibration sequence.&nbsp; 
				To use the calibration, do the following:</font><ol>
					<li>
					<p style="margin-bottom: 6px"><font size="2">When prompted 
					to measure the <i>Darkest</i> (<i>Min</i>) value, position 
					the robot with the Color Sensor directly over the black 
					line.&nbsp; Rest the robot directly on the ground as if it 
					were driving.&nbsp; The distance from the sensor to the 
					ground is very important to the measurement, so do not hold 
					the robot off of the ground in your hands.</font></li>
					<li>
					<p style="margin-bottom: 6px"><font size="2">Move the robot 
					back and forth slightly until the displayed <i>Min</i> value 
					is as low as possible.&nbsp; Press Enter to record the <i>
					Min</i> value.</font></li>
					<li>
					<p style="margin-bottom: 6px"><font size="2">When prompted 
					to measure the <i>Lightest</i> (<i>Max</i>) value, position 
					the robot on the floor far away from the black line and 
					press Enter to record the <i>Max</i> value.</font></li>
				</ol>
				<p><font size="2">The <b>LightCalibrated</b> My Block 
				automatically retrieves the <i>Min</i> and <i>Max</i> values 
				stored by the <b>CheckLightCal</b> / <b>CalibrateLight</b> My 
				Blocks and uses them to provide a <i>calibrated</i> brightness 
				reading as a <i>Percent</i> to the program.&nbsp; The <i>Percent</i> 
				is calculated so that <i>0</i> is output for the darkest value 
				expected, and <i>100</i> is output for the brightest value 
				expected.&nbsp; This means that <i>50</i> is always a good 
				threshold to use for a dark/light transition, regardless of the 
				lighting conditions (if calibrated to the conditions ahead of 
				time).&nbsp; </font>
				<p><font size="2">A program using the <b>LightCalibrated</b> My 
				Block can use <i>50</i> as a simple dark/light threshold value, 
				or for added convenience, the <b>LightCalibrated</b> My Block 
				also outputs a <i>Dark</i> output (type <i>Logic</i>) that is <i>
				True</i> if the calibrated brightness (<i>Percent</i>) is &lt; 50.&nbsp;
				</font>
				<p><font size="2">The <i>Dark</i> output from <b>LightCalibrated</b> 
				is used by the <b>G12-LineFollow2</b> program to 
				choose the turning direction from a <b>Logic Switch</b>, and the
				<i>Percent</i> value is displayed on the screen using the <b>
				DisplayNum</b> My Block so you can see the calibrated brightness 
				readings during the line following.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="208">
				<table border="0">
					<tr>
						<td><b><font size="2">G13-LineFollow4</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
				<img border="0" src="../../images/ProgramExpert.gif" width="53" height="16" alt="Expert"></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="397"><font size="2">This 
				program extends the <b>G12-LineFollow2</b> program to use more detailed motor control 
				for the line following, which will allow it to drive faster and 
				smoother but still be able to take tight turns when necessary.&nbsp; </font>
				<p><font size="2">The <b>G12-LineFollow2</b> program is an example of a &quot;Two State&quot; line 
				follower, because it chooses from two different motor settings 
				(turn left or turn right) depending on the brightness seen from 
				the sensor.&nbsp; A limitation of a two state line follower is 
				that it can only do one kind of turn in each direction.&nbsp; If 
				you make the turns gradual, it will drive smoothly but not be 
				able to follow tight turns in the line.&nbsp; If you make the 
				turns tight, it will be able to follow tight turns in the line 
				but will drive slowly and zigzag a lot even when the line is 
				straight.</font></p>
				<p><font size="2">The &quot;Four State&quot; strategy in
				<b>G13-LineFollow4</b> will choose 
				between four different kinds of turns (sharp right, gradual 
				right, gradual left, sharp left) depending on the sensor value.&nbsp; 
				This will allow it to use the gradual turns when close to the 
				line edge (when the line is mostly straight) but switch to the 
				tight turns when the sensor falls away from the edge, as will 
				happen for tight turns in the line.</font></p>
				<p><font size="2">In order to divide the sensor values into four 
				useful ranges, it is necessary to know the exact range of values 
				expected, which is why the calibration provided by the <b>
				CheckLightCal</b> and <b>LightCalibrated</b> My Blocks is 
				important.&nbsp; When the sensor values are known to be from 0 
				to 100, the program can easily assign a tight turn to the last 
				10% of the top and bottom of the range, but use gradual turns 
				elsewhere.</font></p>
				<p><font size="2">You can try adjusting the motor speeds used in 
				the four different kinds of turns used in
				<b>G13-LineFollow4</b> to change the 
				response to suit different robots and different courses.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			<tr>
				<td align="left" valign="top" width="208">
				<table border="0">
					<tr>
						<td><b><font size="2">G14-ProFollow</font></b></td>
						<td width="4">&nbsp;</td>
						<td>
				<img border="0" src="../../images/ProgramExpert.gif" width="53" height="16" alt="Expert"></td>
					</tr>
				</table>
				</td>
				<td align="left" valign="top" width="397"><font size="2">This 
				program shows a mathematical approach to line following that is 
				the logical extension of the technique used in
				<b>G13-LineFollow4</b>, where 
				different sensor readings result in different tightness of 
				turns.&nbsp; This approach is called a &quot;Proportional&quot; line 
				follower and produces results that are superior to a two state 
				or four state line follower.</font><p><font size="2">Thinking 
				about how the &quot;Four State&quot; line follower in
				<b>G13-LineFollow4</b> works, can 
				you imagine an &quot;Eight State&quot; approach with four different 
				degrees of turn tightness in each direction?&nbsp; How about 
				even more states?&nbsp; Programming each of these states 
				individually would be very tedious.&nbsp; Fortunately, we can 
				come up with a mathematical relationship between the sensor 
				reading and the motor power desired and simply calculate the 
				motor power based on the sensor reading directly, without the 
				need for any <b>Switch</b> blocks to separate the cases.</font></p>
				<p><font size="2">In the <b>G14-ProFollow</b> program, <b>Math</b> blocks are used to 
				calculate a motor response for each possible sensor reading, so 
				that the amount of turning is <i>proportional</i> to the 
				approximate distance that the sensor is away from the edge of 
				the line that it is following.&nbsp; The farther away from 
				center, the tighter the turn.&nbsp; The approximate distance 
				from the center of the line is calculated as the difference 
				between the expected sensor reading at the center (50) and the 
				actual sensor reading.</font></p>
				<p><font size="2">Understanding the math behind this approach 
				may be harder than understanding the
				<b>G13-LineFollow4</b> program, but 
				note that the resulting program is actually simpler in some 
				ways, and it should result in much better line following.</font></td>
				<td align="right" valign="top"><font size="2">
				<a href="variations/steps.html#treads">Treads</a></font><p>
				<font size="2">
				<a href="line/steps.html">Line Sensor</a></font></td>
			</tr>
			</table>
		<h3>&nbsp;</h3>
		<p><font size="2"><a href="programs.html">[Back to Programs Index]</a></font></p>
		</td>
	</tr>
</table>
<p>&nbsp;</p>
<table border="0" width="742" height="26" cellpadding="4">
	<tr>
		<td bgcolor="#FF9900">
		<p align="left" style="margin-bottom: 0"><font size="2">
		<a href="../../index.html"><font color="#000000">Home</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../../projects.html"><font color="#000000">Projects</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../../help.html"><font color="#000000">Help</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../../contact.html"><font color="#000000">Contacts</font></a></font></td>
	</tr>
</table>
<table border="0" width="740">
	<tr>
		<td>
<p align="center">&nbsp;</p>
<p align="center"><font face="Verdana" size="1">Copyright </font>
<font size="1" face="Times New Roman">� </font><font face="Verdana" size="1">
2007-2010 by Dave Parker.&nbsp; All rights reserved.&nbsp; <br>
All project designs, images, and programs are protected by copyright.&nbsp; Please see 
the <a href="../../copyright.html">usage policy</a>. </font></p>

		</td>
	</tr>
</table>

</body>

</html>
