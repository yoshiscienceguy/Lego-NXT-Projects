<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>NXT Segway with Rider</title>
<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
</head>

<body style="font-family: Verdana; font-size: 10pt">

<table border="0" width="740">
	<tr>
		<td><a href="../index.html">
<img border="0" src="../images/nxtprograms.png" width="296" height="36" alt="nxtprograms.com"></a></td>
		<td>
		<p align="right"><font size="2" face="Verdana">Fun 
		Projects for 
				your </font><font size="2"><font face="Arial Rounded MT Bold">LEGO</font><sup><font face="Arial Rounded MT Bold">®</font></sup><font face="Arial Rounded MT Bold"> 
				MINDSTORMS</font><sup><font face="Arial Rounded MT Bold">®</font></sup></font><font size="2" face="Arial Rounded MT Bold"> 
				NXT!</font></td>
	</tr>
</table>
<table border="0" width="742" height="26" cellpadding="4">
	<tr>
		<td bgcolor="#FF9900">
		<p align="left" style="margin-bottom: 0"><font size="2">
		<a href="../index.html"><font color="#000000">Home</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../projects.html"><font color="#000000">Projects</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../help.html"><font color="#000000">Help</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../contact.html"><font color="#000000">Contacts</font></a></font></td>
	</tr>
</table>
<table border="0" width="742" cellpadding="6">
	<tr>
		<td><font face="Arial Rounded MT Bold" size="6">NXT Segway with Rider</font></td>
		<td width="150" align="right">
		<table border="0">
			<tr>
				<td align="right" width="70"><font face="Verdana" size="2">
				<a href="steps.html">Building</a>:</font></td>
				<td height="23" align="right">
				<img border="0" src="../images/BuildAdvanced.gif" width="53" height="16" alt="Advanced"></td>
			</tr>
			<tr>
				<td align="right" width="70"><font face="Verdana" size="2">
				<a href="#Program">Program</a>: </font>
				</td>
				<td height="23" align="right">
				<p align="left">
				<img border="0" src="../images/ProgramExpert.gif" width="53" height="16" alt="Expert"></td>
			</tr>
		</table>
		</td>
	</tr>
</table>
<p align="left">
<a href="../index.html">
<img border="0" src="../images/ForNXT1X.png" width="737" height="21"></a></p>
<h3><span style="font-weight: 400">Building Instructions</span></h3>
<hr>
<p><b><font face="Arial" size="7">1</font></b></p>
<table border="0" width="740">
	<tr>
		<td>
		<img border="1" src="DCP_9640.JPG" width="339" height="290" align="left"></td>
		<td><b>OR</b></td>
		<td>
		<img border="1" src="DCP_9639.JPG" width="337" height="290" align="right"></td>
	</tr>
</table>
<table border="0" width="740">
	<tr>
		<td><font size="2"><br>
		You can use the NXT with either AA batteries or the NXT Rechargeable 
		Battery Pack.<br>
		</font></td>
	</tr>
</table>
<hr>
<p><b><font face="Arial" size="7">2</font></b></p>
<p><img border="1" src="DCP_3198.JPG" width="736" height="297"></p>
<p><img border="1" src="DCP_3197.JPG" width="736" height="313"></p>
<p><img border="1" src="DCP_3196.JPG" width="736" height="283"></p>
<p><img border="1" src="DCP_3195.JPG" width="736" height="501"></p>
<hr>
<p><b><font face="Arial" size="7">3</font></b></p>
<p><img border="1" src="DCP_3194.JPG" width="736" height="258"></p>
<p><img border="1" src="DCP_3193.JPG" width="736" height="300"></p>
<p><img border="1" src="DCP_3192.JPG" width="736" height="481"></p>
<p><img border="1" src="DCP_3191.JPG" width="736" height="507"></p>
<hr>
<p><b><font face="Arial" size="7">4</font></b></p>
<p><img border="1" src="DCP_3190.JPG" width="736" height="307"></p>
<p><img border="1" src="DCP_3189.JPG" width="736" height="216"></p>
<p><img border="1" src="DCP_3188.JPG" width="736" height="374"></p>
<p><img border="1" src="DCP_3187.JPG" width="736" height="511"></p>
<hr>
<p><b><font face="Arial" size="7">5</font></b></p>
<p><img border="1" src="DCP_3186.JPG" width="736" height="305"></p>
<p><img border="1" src="DCP_3185.JPG" width="736" height="478"></p>
<table border="0" width="740">
	<tr>
		<td><font size="2">Connect and wrap wires from ports <b>B</b> and <b>C</b> to the two motors as shown 
		above, then 
		connect and attach the light sensor to port <b>3 </b>as shown below.</font></td>
	</tr>
</table>
<p><img border="1" src="DCP_3184.JPG" width="736" height="496"></p>
<hr>
<p><b><font face="Arial" size="7">6</font></b></p>
<p><img border="1" src="DCP_3182.JPG" width="736" height="218"></p>
<p><img border="1" src="DCP_3181.JPG" width="736" height="394"></p>
<p><img border="1" src="DCP_3180.JPG" width="736" height="373"></p>
<hr>
<p><b><font face="Arial" size="7">7</font></b></p>
<p><img border="1" src="DCP_3178.JPG" width="736" height="297"></p>
<p><img border="1" src="DCP_3177.JPG" width="736" height="458"></p>
<hr>
<p><b><font face="Arial" size="7">8</font></b></p>
<p><img border="1" src="DCP_3176.JPG" width="736" height="446"></p>
<p><img border="1" src="DCP_3175.JPG" width="736" height="421"></p>
<p><img border="1" src="DCP_3174.JPG" width="736" height="431"></p>
<hr>
<p><b><font face="Arial" size="7">9</font></b></p>
<p><img border="1" src="DCP_3173.JPG" width="736" height="354"></p>
<p><img border="1" src="DCP_3172.JPG" width="736" height="165"></p>
<p><img border="1" src="DCP_3171.JPG" width="736" height="207"></p>
<p><img border="1" src="DCP_3170.JPG" width="736" height="331"></p>
<p><img border="1" src="DCP_3169.JPG" width="736" height="335"></p>
<p><img border="1" src="DCP_3168.JPG" width="736" height="452"></p>
<hr>
<p><b><font face="Arial" size="7">10</font></b></p>
<p><img border="1" src="DCP_3167.JPG" width="736" height="292"></p>
<p><img border="1" src="DCP_3166.JPG" width="736" height="357"></p>
<p><img border="1" src="DCP_3165.JPG" width="736" height="250"></p>
<p><img border="1" src="DCP_3164.JPG" width="736" height="242"></p>
<p><img border="1" src="DCP_3163.JPG" width="736" height="455"></p>
<p><img border="1" src="DCP_3162.JPG" width="736" height="441"></p>
<p><img border="1" src="DCP_3161.JPG" width="736" height="509"></p>
<hr>
<p><b><font face="Arial" size="7">11</font></b></p>
<p><img border="1" src="DCP_3160.JPG" width="736" height="368"></p>
<p><img border="1" src="DCP_3159.JPG" width="736" height="324"></p>
<p><img border="1" src="DCP_3158.JPG" width="736" height="370"></p>
<p><img border="1" src="DCP_3157.JPG" width="736" height="482"></p>
<p><img border="1" src="DCP_3156.JPG" width="736" height="470"></p>
<hr>
<p><b><font face="Arial" size="7">12</font></b></p>
<p><img border="1" src="DCP_3155.JPG" width="736" height="191"></p>
<p><img border="1" src="DCP_3154.JPG" width="736" height="386"></p>
<p><img border="1" src="DCP_3153.JPG" width="736" height="478"></p>
<table border="0" width="740">
	<tr>
		<td><font size="2">Connect the body motor for the rider to port <b>A</b>.&nbsp; 
		The ultrasonic sensor is not attached in this design.</font></td>
	</tr>
</table>
<p><img border="1" src="DCP_3152.JPG" width="736" height="506"></p>
<hr>
<p><a name="Program"></a></p>
<table border="1" width="740" cellpadding="4">
	<tr>
		<td bgcolor="#C0C0C0"><font face="Arial Rounded MT Bold" size="5">NXT Segway 
		with Rider Programming</font><p style="margin-bottom: 6px" align="center">
		<u>
		<b>Important Usage Information</b></u></p>
		<p style="margin-bottom: 6px">
		<font size="2"><b>Note: </b>Unlike balancing robots that use a 
		gyroscopic sensor or other special sensors, this design uses only the 
		light sensor, which does not know which way is &quot;up&quot; in an absolute 
		sense, so it can only guess on its relative tilt based on the amount of 
		reflected light received from the ground.&nbsp; As a result, 
		getting a good balance is a bit of a challenge when you are using it.&nbsp; 
		Please read the following important tips.&nbsp; </font></p>
		<p style="margin-bottom: 6px">
		<font size="2">Getting the NXT Segway with Rider robot to balance requires 
		good lighting and surface conditions for the light sensor, and also 
		requires that you start the robot exactly balanced to begin with, so be 
		prepared to experiment with different surfaces and lighting, and also 
		some practice at getting the robot started out balanced to begin with.&nbsp; 
		Here are some tips:</font></p>
		<ul>
			<li>
			<p style="margin-bottom: 6px"><font size="2"><b>Software and Firmware 
			Versions.&nbsp; </b>Different versions of the NXT-G software and NXT 
			firmware run at different speeds, which unfortunately affects the 
			performance.&nbsp; The standard NXT-G 1.x programs below were tuned 
			for NXT-G 1.1 and firmware 1.05, and the alternate LEGO Education 
			programs were tuned for NXT-G 2.0 and firmware 1.28.&nbsp; If you are using an older firmware 
			for the corresponding software, you can download an update
			<a href="http://mindstorms.lego.com/en-us/support/files/default.aspx#Firmware">
			here</a>.</font></p></li>
			<li>
			<p style="margin-bottom: 6px"><font size="2"><b>Lighting.&nbsp; </b>
			External (room) lights can confuse the light sensor, especially if 
			the amount of lighting or shadow varies as the robot moves around.&nbsp; 
			For best results, find a location where the light sensor will be in 
			shadow from any room lights, even as the robot moves forward and 
			backward by a couple of feet in either direction.&nbsp; Also, 
			florescent lights will interfere less than incandescent lights.&nbsp;&nbsp; 
			In particular, make sure that when you remove your hand(s) to 
			release the robot in the beginning, that the shadow/lighting 
			conditions don't change at that point.</font></p></li>
			<li>
			<p style="margin-bottom: 6px"><font size="2"><b>Surface.</b>&nbsp; 
			The robot requires a surface that has very uniform brightness.&nbsp; 
			Blank white paper will work well, or any surface that is a uniform 
			solid color with no pattern.&nbsp; A wood floor with a wood grain 
			pattern, or a tile floor with texture will not work well, because 
			the light reflection will vary as the robot moves.</font></p></li>
			<li>
			<p style="margin-bottom: 6px"><font size="2"><b>Initial Balance.</b>&nbsp; 
			Since the light sensor cannot tell which way is up, <i>the robot must 
			start perfectly balanced to begin with</i>, and then the program will 
			try to maintain that balance position by trying to seek out the same 
			reflected light reading that the light sensor had at the beginning 
			of the program.&nbsp; Specifically, the robot must be <i>physically</i> 
			balanced, which is not the same as holding it visually straight up.&nbsp;If 
			you just hold it upright with your hand, it will not be physically 
			balanced.</font></p></li>
		</ul>
		<blockquote>
			<p style="margin-bottom: 6px"><font size="2">At the beginning of the program, the program 
			will beep three times over three seconds, to give you time to get 
			the robot balanced with your hands, then it measures the position at 
			the 4th (higher tone) beep, so the goal is to <i>have it perfectly 
			balanced at the 4th beep</i>.&nbsp; Then it starts to try to stay 
			balanced automatically.&nbsp; Note that if you start the robot very 
			close to but not quite balanced, it will drive forward or backward 
			in the direction that it was leaning at the start.&nbsp; Getting a 
			good start may require some practice, so be patient!</font></p>
		</blockquote>
		<div align="center">
			<table border="0" cellpadding="6">
				<tr>
					<td width="420">
					<p align="center">
					<img border="1" src="DCP_3146.JPG" width="373" height="284"></td>
				</tr>
				<tr>
					<td width="420"><font size="2">A good way to start the robot 
					balanced is to start the program, then during the three 
					beeps, support the robot only by the top of the driver's 
					head (ultrasonic sensor) very lightly using one finger and 
					thumb with an open gap, trying to keep the robot from 
					leaning to either side very much at all.</font></td>
				</tr>
			</table>
		</div>
		<p style="margin-bottom: 6px">
		<b>The Programs</b></p>
		<p style="margin-bottom: 6px">
		<font size="2">Three programs are provided for the NXT Segway with Rider, 
		a single-NXT program, and a pair of Bluetooth-enabled program for use 
		with two NXTs (one for the Segway NXT and one for the remote control 
		NXT).&nbsp;&nbsp; Two different version of these three programs are 
		provided, one version tuned for NXT-G 1.1 and one tuned for LEGO 
		Education's NXT-G 2.0. <br>
&nbsp;</font></p>
		<div align="center">
			<table border="1" cellpadding="3" style="border-collapse: collapse" bordercolorlight="#000000" bordercolordark="#000000">
				<tr>
					<td>&nbsp;</td>
					<td><b><font size="2">For NXT-G 1.1</font></b></td>
					<td><b><font size="2">For LEGO Education NXT-G 2.0</font></b></td>
				</tr>
				<tr>
					<td><b><font size="2">Single NXT</font></b></td>
					<td><font size="2"><a href="../programs/Segway.rbt">Segway</a></font></td>
					<td><font size="2"><a href="../programs/SegwayLS.rbt">
					SegwayLS</a></font></td>
				</tr>
				<tr>
					<td><b><font size="2">Bluetooth Segway NXT</font></b></td>
					<td><font size="2"><a href="../programs/SegwayBT.rbt">
					SegwayBT</a></font></td>
					<td><font size="2"><a href="../programs/SegwayLS-BT.rbt">
					SegwayLS-BT</a></font></td>
				</tr>
				<tr>
					<td><b><font size="2">Bluetooth Remote NXT</font></b></td>
					<td><font size="2"><a href="../programs/SegwayRemote.rbt">
					SegwayRemote</a></font></td>
					<td><font size="2"><a href="../programs/SegwayRemote2.rbt">
					SegwayRemote2</a></font></td>
				</tr>
			</table>
		</div>
		<p style="margin-bottom: 6px">
		<font size="2">Both of the Segway programs balance the 
		robot using a form of &quot;PID Controller&quot;.&nbsp; See this
		<a href="http://en.wikipedia.org/wiki/PID_controller">Wikipedia article 
		on PID Control</a> for technical information on how a PID controller works.</font></p>
		<p style="margin-bottom: 6px">
		<font size="2">The single NXT Segway program will make the robot 
		automatically balance itself, based on its initial position, without any 
		leaning movement by the rider.&nbsp; When using this program, you can 
		lock the rider in place to keep him upright as explained
		<a href="#Locking">below</a>.</font></p>
		<p style="margin-bottom: 6px">
		<font size="2">The Bluetooth<b> </b>programs add Bluetooth remote control 
		to allow you to control the forward and backward lean of the rider from 
		another NXT brick via Bluetooth.&nbsp; First, establish a Bluetooth 
		connection from the second NXT (the remote control) to the Segway NXT on 
		Connection 1, then run the two Bluetooth programs on the two NXTs, starting 
		with the Segway balanced.&nbsp; Now pressing the gray Left and Right 
		arrow buttons on the remote control NXT will cause the rider to lean 
		slightly in that direction.&nbsp; Use only slight movements (e.g. one or 
		two presses in each direction), so that the Segway can keep up with the 
		motion.&nbsp; </font></p>
		</td>
	</tr>
</table>
<p style="margin-bottom: 6px">&nbsp;</p>
<table border="0" width="740">
	<tr>
		<td>
		<h3><span style="font-weight: 400">
		<font face="Arial Rounded MT Bold" size="5"><a name="Locking"></a>
		Locking the Rider in Place</font></span></h3>
		<p><font size="2">When using the <b>Segway</b> program, which does not 
		do any rider leaning, you can lock in the rider in place as shown below 
		to make the robot easier to work with.&nbsp; Remember to remove the lock 
		when using the <b>SegwayBT</b> program.</font></p>
		<p align="center">
		<img border="1" src="DCP_3151.JPG" width="610" height="269"></p>
		<p><font size="2">You can use either of these axles to hold the rider in 
		place.&nbsp; The size 5 axle will look better, but the size 8 axle is easier to insert and remove. </font></p>
		<p align="center">
		<img border="1" src="DCP_3150.JPG" width="610" height="389"></td>
	</tr>
</table>
<hr>
<p style="margin-bottom: 6px">&nbsp;</p>
<table border="1" width="740" cellpadding="4">
	<tr>
		<td><font face="Arial Rounded MT Bold" size="5">Challenges</font><ul>
			<li>
			<p style="margin-bottom: 6px"><font size="2">The <b>Segway</b> and
			<b>SegwayBT</b> programs use a &quot;PID Controller&quot; strategy to balance 
			the robot.&nbsp; This type of control strategy can be used in 
			several other applications of robotics.&nbsp; The article
			<a href="http://www.inpharmix.com/jps/PID_Controller_For_Lego_Mindstorms_Robots.html">
			A PID Controller For Lego Mindstorms Robots</a> provides a good 
			introduction to PID control, as applied to line following with an 
			NXT robot, by developing it and comparing it to simpler methods.&nbsp; 
			Can you adapt the <b>Segway</b> program to re-use the PID strategy 
			for another application such as line following?</font></li>
			<li>
			<p style="margin-bottom: 6px"><font size="2">The <b>SegwayBT</b> 
			program does not modify the power to the wheels to make the robot go 
			forward and backward.&nbsp; Rather, it simply leans the driver's 
			body, which forces the robot to adjust to stay balanced, which has 
			the effect of causing the robot to move forward and backward 
			(somewhat like a real Segway getting started).&nbsp; Can you modify 
			the control program to modify the motor power instead of the driver 
			lean to achieve forward/backward movement?</font></li>
			<li>
			<p style="margin-bottom: 6px"><font size="2">The solid axle between 
			the wheels is not necessary, but it prevents the robot from 
			wandering sideways as it adjusts its balance.&nbsp; Try removing the 
			center connection.&nbsp; Now can you imagine modifying the <b>
			SegwayBT</b> program to adjust the motor power to the wheels to make 
			the robot turn left and right by remote control, while remaining 
			balanced?</font></li>
			<li>
			<p style="margin-bottom: 6px"><font size="2">The <b>Segway</b> 
			program is a basic
			<a href="http://en.wikipedia.org/wiki/PID_controller">PID controller</a> 
			that uses the light sensor's reading to determine an &quot;error&quot; in its 
			position and then tries to correct for it.&nbsp; If the robot starts 
			not quite balanced, it will drive steadily in one direction, or 
			perhaps even accelerate in that direction and then fall.&nbsp; The
			<b>Segway</b> program does not consider the robot's forward/backward 
			position when determining the &quot;error&quot; for the PID controller.&nbsp; 
			Can you imagine modifying the error calculation to use the rotation 
			sensor of one of the drive motors to add an error factor that 
			increases as the robot wanders away from its starting point?&nbsp; 
			Can the controller use this to keep the robot close to its starting 
			point instead of wandering away?&nbsp; Will this affect its ability 
			to stay balanced?</font></li>
		</ul>
		</td>
	</tr>
</table>
<table border="0" width="740">
	<tr>
		<td>
<p align="center">&nbsp;</p>
<p align="center"><font face="Verdana" size="1">&quot;Segway&quot; is a registered 
trademark of <a href="http://www.segway.com/">Segway, Inc.</a><br>
&nbsp;</font></p>

		</td>
	</tr>
</table>

<table border="0" width="742" height="26" cellpadding="4">
	<tr>
		<td bgcolor="#FF9900">
		<p align="left" style="margin-bottom: 0"><font size="2">
		<a href="../index.html"><font color="#000000">Home</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../projects.html"><font color="#000000">Projects</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../help.html"><font color="#000000">Help</font></a>&nbsp;&nbsp;&nbsp;&nbsp;
		<a href="../contact.html"><font color="#000000">Contacts</font></a></font></td>
	</tr>
</table>
<table border="0" width="740">
	<tr>
		<td>
<p align="center"><font face="Verdana" size="1"><br>
<br>
Copyright </font>
<font size="1" face="Times New Roman">© </font><font face="Verdana" size="1">
2007-2010 by Dave Parker.&nbsp; All rights reserved.&nbsp; <br>
All project designs, images, and programs are protected by copyright.&nbsp; Please see 
the <a href="../copyright.html">usage policy</a>. </font></p>

		</td>
	</tr>
</table>

</body>

</html>
